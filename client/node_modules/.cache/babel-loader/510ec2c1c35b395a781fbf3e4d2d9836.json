{"ast":null,"code":"var _jsxFileName = \"/Users/jason_mac/GA_SEIR/Unit3/GroupProject/Tech-Tinder-Front/client/src/components/VideoPosts.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { DeleteVideoPost, GetImagePosts, GetVideoPosts, GetWrittenPosts } from '../services/PostServices';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst VideoPosts = _ref => {\n  _s();\n\n  let {\n    post,\n    currentUser,\n    newPost,\n    setPosts,\n    posts,\n    setShownPosts\n  } = _ref;\n\n  const getId = link => {\n    let reverse = link.split('').reverse().join('');\n    let id = '';\n\n    for (let i = 0; i < 11; i++) {\n      id = id + reverse[i];\n    }\n\n    let final = id.split('').reverse().join('');\n    return 'https://www.youtube.com/embed/' + final;\n  };\n\n  const [deletePost, setDeletePost] = useState(false);\n\n  const cancel = () => {\n    setDeletePost(false);\n  };\n\n  const allPosts = [];\n\n  const chicken = res => {\n    for (let i = 0; i < res.length; i++) {\n      allPosts.push(res[i]);\n    }\n  };\n\n  const updateP = async sortPosts => {\n    const p = [];\n\n    for (let i = 0; i < sortPosts.length; i++) {\n      if (parseInt(sortPosts[i].userId) === parseInt(currentUser.id)) {\n        p.push(sortPosts[i]);\n      }\n    }\n\n    await setShownPosts(p);\n  };\n\n  const deletePostClick = async id => {\n    await DeleteVideoPost(id);\n    await GetImagePosts().then(res => chicken(res));\n    await GetVideoPosts().then(res => chicken(res));\n    await GetWrittenPosts().then(res => chicken(res));\n    const sortPosts = allPosts.slice().sort((a, b) => b.time - a.time);\n    await setPosts(sortPosts);\n    await updateP(sortPosts);\n    setDeletePost(false);\n  };\n\n  return currentUser ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"image-post\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-image\",\n        children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n          src: getId(post.video_url),\n          title: \"YouTube video player\",\n          frameBorder: \"0\",\n          allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\n          allowFullscreen: \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-text\",\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: post.caption\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), post.userId === currentUser.id && !newPost ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"trashcan-icon\",\n      onClick: () => setDeletePost(true),\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"https://cdn-icons-png.flaticon.com/512/2891/2891491.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this) : '', deletePost ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Delete\",\n      id: \"deletePost\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Are you sure you?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"delete-buttons\",\n        id: \"delete-btn-post\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://freeiconshop.com/wp-content/uploads/edd/cross-flat.png\",\n          alt: \"edit\",\n          onClick: () => cancel(),\n          id: \"cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://freeiconshop.com/wp-content/uploads/edd/checkmark-flat.png\",\n          alt: \"edit\",\n          onClick: () => deletePostClick(post.id),\n          id: \"confirm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this) : '']\n  }, post.text, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this) : '';\n};\n\n_s(VideoPosts, \"doNFP/iI+zYRhwia/XXt6MdhtYU=\");\n\n_c = VideoPosts;\nexport default VideoPosts;\n\nvar _c;\n\n$RefreshReg$(_c, \"VideoPosts\");","map":{"version":3,"names":["React","useState","DeleteVideoPost","GetImagePosts","GetVideoPosts","GetWrittenPosts","VideoPosts","post","currentUser","newPost","setPosts","posts","setShownPosts","getId","link","reverse","split","join","id","i","final","deletePost","setDeletePost","cancel","allPosts","chicken","res","length","push","updateP","sortPosts","p","parseInt","userId","deletePostClick","then","slice","sort","a","b","time","video_url","caption","text"],"sources":["/Users/jason_mac/GA_SEIR/Unit3/GroupProject/Tech-Tinder-Front/client/src/components/VideoPosts.jsx"],"sourcesContent":["import React, { useState } from 'react'\nimport {\n  DeleteVideoPost,\n  GetImagePosts,\n  GetVideoPosts,\n  GetWrittenPosts\n} from '../services/PostServices'\n\nconst VideoPosts = ({\n  post,\n  currentUser,\n  newPost,\n  setPosts,\n  posts,\n  setShownPosts\n}) => {\n  const getId = (link) => {\n    let reverse = link.split('').reverse().join('')\n    let id = ''\n    for (let i = 0; i < 11; i++) {\n      id = id + reverse[i]\n    }\n    let final = id.split('').reverse().join('')\n    return 'https://www.youtube.com/embed/' + final\n  }\n  const [deletePost, setDeletePost] = useState(false)\n  const cancel = () => {\n    setDeletePost(false)\n  }\n  const allPosts = []\n  const chicken = (res) => {\n    for (let i = 0; i < res.length; i++) {\n      allPosts.push(res[i])\n    }\n  }\n  const updateP = async (sortPosts) => {\n    const p = []\n    for (let i = 0; i < sortPosts.length; i++) {\n      if (parseInt(sortPosts[i].userId) === parseInt(currentUser.id)) {\n        p.push(sortPosts[i])\n      }\n    }\n    await setShownPosts(p)\n  }\n  const deletePostClick = async (id) => {\n    await DeleteVideoPost(id)\n    await GetImagePosts().then((res) => chicken(res))\n    await GetVideoPosts().then((res) => chicken(res))\n    await GetWrittenPosts().then((res) => chicken(res))\n    const sortPosts = allPosts.slice().sort((a, b) => b.time - a.time)\n    await setPosts(sortPosts)\n    await updateP(sortPosts)\n    setDeletePost(false)\n  }\n  return currentUser ? (\n    <div className=\"post\" key={post.text}>\n      <div className=\"image-post\">\n        <div className=\"post-image\">\n          <iframe\n            src={getId(post.video_url)}\n            title=\"YouTube video player\"\n            frameBorder=\"0\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n            allowFullscreen=\"true\"\n          ></iframe>\n        </div>\n        <div className=\"image-text\">\n          <h4>{post.caption}</h4>\n        </div>\n      </div>\n      {post.userId === currentUser.id && !newPost ? (\n        <div className=\"trashcan-icon\" onClick={() => setDeletePost(true)}>\n          <img src=\"https://cdn-icons-png.flaticon.com/512/2891/2891491.png\" />\n        </div>\n      ) : (\n        ''\n      )}\n      {deletePost ? (\n        <div className=\"Delete\" id=\"deletePost\">\n          <div>\n            <h4>Are you sure you?</h4>\n          </div>\n          <div className=\"delete-buttons\" id=\"delete-btn-post\">\n            <img\n              src=\"https://freeiconshop.com/wp-content/uploads/edd/cross-flat.png\"\n              alt=\"edit\"\n              onClick={() => cancel()}\n              id=\"cancel\"\n            />\n            <img\n              src=\"https://freeiconshop.com/wp-content/uploads/edd/checkmark-flat.png\"\n              alt=\"edit\"\n              onClick={() => deletePostClick(post.id)}\n              id=\"confirm\"\n            />\n          </div>\n        </div>\n      ) : (\n        ''\n      )}\n    </div>\n  ) : (\n    ''\n  )\n}\n\nexport default VideoPosts\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}